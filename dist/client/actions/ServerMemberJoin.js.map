{"version":3,"file":"ServerMemberJoin.js","sourceRoot":"","sources":["../../../src/client/actions/ServerMemberJoin.ts"],"names":[],"mappings":";;;AAAA,qCAAiC;AACjC,oDAA6C;AAE7C,MAAa,gBAAiB,SAAQ,eAAM;IACxC,KAAK,CAAC,MAAM,CAAC,IAAkC;QAC3C,IAAI,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,CAAA;QAEnD,IAAI,CAAC,MAAM,EAAE;YACT,MAAM,GAAG,MAAM,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAA;YACjD,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,kBAAM,CAAC,aAAa,EAAE,MAAM,CAAC,CAAA;SACjD;QAED,MAAM,MAAM,GAAG,MAAM,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;QAEpD,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,EAAE,MAAM,CAAC,CAAA;QAE3C,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,kBAAM,CAAC,kBAAkB,EAAE,MAAM,CAAC,CAAA;QAEnD,OAAO,EAAE,MAAM,EAAE,CAAA;IACrB,CAAC;CACJ;AAjBD,4CAiBC","sourcesContent":["import { Action } from './Action'\nimport { Events } from '../../util/Constants'\n\nexport class ServerMemberJoin extends Action {\n    async handle(data: { id: string; user: string }): Promise<unknown> {\n        let server = this.client.servers.cache.get(data.id)\n\n        if (!server) {\n            server = await this.client.servers.fetch(data.id)\n            this.client.emit(Events.SERVER_CREATE, server)\n        }\n\n        const member = await server.members.fetch(data.user)\n\n        server.members.cache.set(member.id, member)\n\n        this.client.emit(Events.SERVER_MEMBER_JOIN, member)\n\n        return { member }\n    }\n}\n"]}