{"version":3,"file":"ServerMemberUpdate.js","sourceRoot":"","sources":["../../../src/client/actions/ServerMemberUpdate.ts"],"names":[],"mappings":";;;AACA,qCAAiC;AACjC,oDAA6C;AAE7C,MAAa,wBAAyB,SAAQ,eAAM;IAChD,MAAM,CAAC,IAAqC;;QACxC,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,CAAA;QACrD,MAAM,SAAS,GAAG,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,MAAA,MAAA,IAAI,CAAC,IAAI,0CAAE,GAAG,0CAAE,IAAI,CAAC,CAAA;QAEjE,IAAI,MAAM,IAAI,SAAS,EAAE;YACrB,MAAM,SAAS,GAAG,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;YAE9C,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE,EAAE,SAAS,CAAC,CAAA;YAEjD,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,kBAAM,CAAC,oBAAoB,EAAE,SAAS,EAAE,SAAS,CAAC,CAAA;YAEnE,OAAO,EAAE,SAAS,EAAE,SAAS,EAAE,CAAA;SAClC;QAED,OAAO,EAAE,SAAS,EAAE,CAAA;IACxB,CAAC;CACJ;AAjBD,4DAiBC","sourcesContent":["import { Member as RawMember } from 'revolt-api/types/Servers'\nimport { Action } from './Action'\nimport { Events } from '../../util/Constants'\n\nexport class ServerMemberUpdateAction extends Action {\n    handle(data: { id: string; data: RawMember }): unknown {\n        const server = this.client.servers.cache.get(data.id)\n        const oldMember = server?.members.cache.get(data.data?._id?.user)\n\n        if (server && oldMember) {\n            const newMember = oldMember._update(data.data)\n\n            server.members.cache.set(newMember.id, newMember)\n\n            this.client.emit(Events.SERVER_MEMBER_UPDATE, oldMember, newMember)\n\n            return { newMember, oldMember }\n        }\n\n        return { oldMember }\n    }\n}\n"]}